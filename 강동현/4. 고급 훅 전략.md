# ê³ ê¸‰ í›… ì „ëµ
## âœ… 4-1. useRef ì‹¬í™” í™œìš©
### 1. DOM ì ‘ê·¼ì„ ë„˜ì–´ "ìƒíƒœ ë³´ì¡´ ìš©ë„"ë¡œ í™•ì¥
- useRefëŠ” ë Œë”ë§ ì‚¬ì´ì— ê°’ì„ ê¸°ì–µí•  ìˆ˜ ìˆëŠ” ë©”ëª¨ë¦¬ ìŠ¬ë¡¯ì…ë‹ˆë‹¤.
- useStateì™€ ë‹¬ë¦¬ ìƒíƒœê°€ ë°”ë€Œì–´ë„ ë¦¬ë Œë”ë§ë˜ì§€ ì•ŠìŒ.
- ì»´í¬ë„ŒíŠ¸ ì™¸ë¶€ ë³€ìˆ˜ì²˜ëŸ¼ ì‚¬ìš©ë˜ì§€ë§Œ, ë¦¬ì•¡íŠ¸ì˜ ìƒëª…ì£¼ê¸° ì•ˆì—ì„œ ì•ˆì „í•˜ê²Œ ê´€ë¦¬ë©ë‹ˆë‹¤.

```js
const valueRef = useRef(0);
valueRef.current += 1;  // ë Œë”ë§ê³¼ ë¬´ê´€í•˜ê²Œ ëˆ„ì  ê°€ëŠ¥
```
### 2. ì´ì „ props/state ê¸°ì–µí•˜ê¸°
```js
const prevCount = useRef(count);
useEffect(() => {
  prevCount.current = count;
}, [count]);
```
- useEffect ë‚´ì—ì„œ í˜„ì¬ ê°’ì„ ì €ì¥í•¨ìœ¼ë¡œì¨, ë‹¤ìŒ ë Œë”ë§ì—ì„œ ì´ì „ ê°’ì„ ì°¸ì¡°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ë¹„êµ ë¡œì§, ë³€ê²½ ê°ì§€ ë“±ì— ìœ ìš©í•©ë‹ˆë‹¤.

### 3. ë¹„ë™ê¸° ì‘ì—… ì¤‘ë‹¨ ì—¬ë¶€ ì²´í¬
```js
const isMounted = useRef(false);

useEffect(() => {
  isMounted.current = true;

  fetchData().then(data => {
    if (isMounted.current) {
      setData(data);  // âœ… ë§ˆìš´íŠ¸ ìƒíƒœ í™•ì¸ í›„ ì²˜ë¦¬
    }
  });

  return () => {
    isMounted.current = false;
  };
}, []);
```
- ì–¸ë§ˆìš´íŠ¸ í›„ì—ë„ ë‚¨ì•„ìˆëŠ” ë¹„ë™ê¸° ì½œë°±ì—ì„œ setState í˜¸ì¶œì„ ë°©ì§€.
- ë„¤íŠ¸ì›Œí¬ ìš”ì²­, íƒ€ì´ë¨¸, ì›¹ì†Œì¼“ ë“±ì—ì„œ ìœ ìš©.

## âœ… 4-2. useLayoutEffect vs useEffect
|í•­ëª©|	useEffect|	useLayoutEffect|
|-|-|-|
|ì‹¤í–‰ ì‹œì |	ë¸Œë¼ìš°ì €ê°€ paint í›„|	DOMì´ ë³€ê²½ëœ ì§í›„, paint ì „
|ì£¼ìš” ìš©ë„|	ë°ì´í„° fetch, ì´ë²¤íŠ¸ ë“±ë¡ ë“± ë¹„ UI ë¡œì§|	DOM í¬ê¸° ì¸¡ì •, ìŠ¤í¬ë¡¤ ìœ„ì¹˜ ì¡°ì • ë“± ë ˆì´ì•„ì›ƒ ê´€ë ¨ ë¡œì§|
|ë¸”ë¡œí‚¹ ì—¬ë¶€|	ë¹„ë™ê¸° ëŠë‚Œ, paintì— ì˜í–¥ ì—†ìŒ|	ë™ê¸°ì  ì‹¤í–‰ â†’ paint ì°¨ë‹¨ ê°€ëŠ¥|

### ğŸ§© ì‚¬ìš© ì˜ˆì‹œ 1: DOM ìœ„ì¹˜ ì¸¡ì •
```js
const boxRef = useRef();

useLayoutEffect(() => {
  const rect = boxRef.current.getBoundingClientRect();
  console.log(rect);  // ì •í™•í•œ ìœ„ì¹˜ ì¸¡ì • (paint ì „)
}, []);
```
> useEffectë¥¼ ì¼ë‹¤ë©´ paint í›„ì— ì‹¤í–‰ë˜ë¯€ë¡œ, ë ˆì´ì•„ì›ƒì´ ë°”ë€ŒëŠ” ì‹œì ì—ì„œ ì •í™•í•œ ì¸¡ì •ì´ ì–´ë ¤ìš¸ ìˆ˜ ìˆìŒ.

### ğŸ§© ì‚¬ìš© ì˜ˆì‹œ 2: ìŠ¤í¬ë¡¤ ë³µì›
```js
useLayoutEffect(() => {
  window.scrollTo(0, 100);  // paint ì „ì— ìœ„ì¹˜ ë³µì›
}, []);
```
> useEffectì˜€ë‹¤ë©´ ìŠ¤í¬ë¡¤ì´ í•œë²ˆ ì˜ëª» ë‚´ë ¤ê°”ë‹¤ê°€ ë‹¤ì‹œ ì¡°ì •ë˜ë©° ê¹œë¹¡ì„ì´ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## âœ… 4-3. useReducer ì„¤ê³„ íŒ¨í„´
### ğŸ”§ ì–¸ì œ ì“°ë‚˜?
- ìƒíƒœ êµ¬ì¡°ê°€ ë³µì¡í•˜ê³ , ìƒíƒœ ë³€ê²½ì˜ ì¢…ë¥˜ê°€ ë§ì„ ë•Œ.
- ìƒíƒœ ë³€ê²½ ë¡œì§ì„ ì»´í¬ë„ŒíŠ¸ ë°”ê¹¥ìœ¼ë¡œ ë¶„ë¦¬í•  ìˆ˜ ìˆì–´ ìœ ì§€ë³´ìˆ˜ì„±ê³¼ í…ŒìŠ¤íŠ¸ì„±ì´ ë†’ì•„ì§.

### âœ… ê¸°ë³¸ êµ¬ì¡°
```js
const initialState = { count: 0 };

function reducer(state, action) {
  switch (action.type) {
    case 'INCREMENT':
      return { count: state.count + 1 };
    case 'RESET':
      return { count: 0 };
    default:
      throw new Error();
  }
}

const [state, dispatch] = useReducer(reducer, initialState);
```
```jsx
<button onClick={() => dispatch({ type: 'INCREMENT' })}>+</button>
<button onClick={() => dispatch({ type: 'RESET' })}>Reset</button>
```
### ğŸ§© ë³µì¡í•œ ìƒíƒœ ê´€ë¦¬ ì˜ˆì‹œ: Todo ì•±
```js
const initialState = { todos: [] };

function todoReducer(state, action) {
  switch (action.type) {
    case 'ADD':
      return { todos: [...state.todos, action.payload] };
    case 'REMOVE':
      return { todos: state.todos.filter(todo => todo.id !== action.id) };
    default:
      return state;
  }
}
```
- useReducerëŠ” ìƒíƒœ ë³€ê²½ ë¡œì§ì„ ì™¸ë¶€í™”í•˜ê¸° ë•Œë¬¸ì— í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±ì´ ì‰¬ì›€.
- Reduxì™€ ìœ ì‚¬í•œ ë°©ì‹ì´ë¯€ë¡œ, ìƒíƒœê°€ ë§ì€ ì•±ì—ì„œëŠ” í•„ìˆ˜ì .

